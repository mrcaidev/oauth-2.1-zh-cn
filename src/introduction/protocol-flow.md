# 1.2. 协议流程

```
+--------+                               +---------------+
|        |--(1)- Authorization Request ->|   Resource    |
|        |                               |     Owner     |
|        |<-(2)-- Authorization Grant ---|               |
|        |                               +---------------+
|        |
|        |                               +---------------+
|        |--(3)-- Authorization Grant -->| Authorization |
| Client |                               |     Server    |
|        |<-(4)----- Access Token -------|               |
|        |                               +---------------+
|        |
|        |                               +---------------+
|        |--(5)----- Access Token ------>|    Resource   |
|        |                               |     Server    |
|        |<-(6)--- Protected Resource ---|               |
+--------+                               +---------------+
```

<p align="center">图 1：抽象的协议流程</p>

抽象的 OAuth 2.1 流程如图 1 所示。它描述了四种角色之间的交互，包括以下步骤：

1. 客户端请求资源所有者的授权。授权请求可以直接发送给资源所有者（如图所示）；或者一种更好的做法是，通过作为中介的授权服务器来间接发送。
2. 客户端接收到授权许可。后者是一种代表了资源所有者授权的凭据，其表现形式可以使用该规范定义的授权许可类型，或者是扩展的许可类型。授权许可的类型一方面取决于客户端请求授权的方法，另一方面也取决于授权服务器支持的类型。
3. 客户端与授权服务器进行认证，并展示授权许可，来请求访问令牌。
4. 授权服务器认证客户端，并验证授权许可。如果有效，就颁发访问令牌。
5. 客户端展示访问令牌以进行认证，来请求资源服务器上的受保护资源。
6. 资源服务器验证访问令牌。如果有效，就为请求提供服务。

客户端从资源所有者处获取授权许可（如步骤（1）和（2）所示）的首选方法，是使用授权服务器作为中介，如第 4.1 节的图 3 所示。
